# AgrisaleWS 帮助文档

欢迎使用 AgrisaleWS 农资管理系统！本帮助文档将指导您如何使用系统的各项功能。

---

## 目录

1. [快速开始](#快速开始)
2. [Workspace 工作空间](#workspace-工作空间)
3. [基础功能](#基础功能)
4. [数据统计与分析](#数据统计与分析)
5. [数据管理与备份](#数据管理与备份)
6. [成员管理与协作](#成员管理与协作)
7. [系统设置](#系统设置)
8. [个人中心](#个人中心)
9. [常见问题](#常见问题)

---

## 快速开始

### 首次使用

1. **注册账号**
   - 打开应用后，点击"注册"按钮
   - 输入用户名和密码（密码至少3个字符）
   - 确认密码后点击"注册"
   - 注册成功后会自动登录到工作台界面

2. **登录系统**
   - 如果已有账号，输入用户名和密码点击"登录"
   - 系统会自动尝试连接服务器（支持多个地址自动切换）
   - 登录成功后进入工作台界面

3. **配置服务器地址**（可选）
   - 如果自动连接失败，可以进入"个人中心" → "设置" → "服务器"
   - 修改服务器地址或使用快速配置（HTTPS/局域网）
   - 点击"测试连接"验证地址是否可用
   - 保存配置后重新登录

### 主界面介绍

登录后，系统提供两个主界面，通过底部导航栏切换：

#### **工作台**
- 查看和管理您的所有 Workspace（工作空间）
- 创建新的 Workspace
- 切换不同的 Workspace
- 查看 Workspace 详情和成员信息

#### **个人中心**
- 查看个人信息（用户名、注册时间、最后登录时间）
- 管理账户设置（修改密码、在线设备）
- 配置全局设置（AI模型、服务器、关于）
- 查看在线设备数量

### Workspace 内部界面

进入 Workspace 后，界面分为三个页面，通过底部导航栏切换：

- **第一页（基础功能）**：日常业务操作（采购、销售、退货、进账、汇款、产品、客户、供应商、员工）
- **第二页（数据统计）**：基础统计、综合分析、智能分析
- **第三页（系统工具）**：数据管理、数据备份、审计日志

---

## Workspace 工作空间

### 什么是 Workspace？

Workspace（工作空间）是 AgrisaleWS 的核心概念，每个 Workspace 都是一个独立的账本空间，拥有自己的：
- 业务数据（产品、客户、供应商、员工、采购、销售等）
- 数据备份配置
- 审计日志记录
- 成员和权限设置（仅云端 Workspace）

您可以为不同的业务、项目或场景创建多个 Workspace，实现数据隔离和独立管理。

### Workspace 类型

#### **本地 Workspace**
- **存储位置**：仅存储在当前设备的本地数据库
- **访问范围**：只能在创建设备上访问，其他设备看不到
- **成员管理**：不支持多人协作，仅创建者自己可用
- **适用场景**：个人使用、离线场景、对隐私要求极高的数据

#### **云端 Workspace**
- **存储位置**：存储在服务器上
- **访问范围**：任何设备登录同一账号都可以访问
- **成员管理**：支持邀请其他用户协作，设置不同权限
- **适用场景**：多设备使用、团队协作、数据共享

### 创建 Workspace

1. 在工作台界面点击"创建 Workspace"按钮
2. 输入 Workspace 名称（必填，最多100个字符）
3. 输入描述信息（可选，最多500个字符）
4. 选择存储类型：
   - **本地**：数据仅保存在当前设备
   - **云端**：数据保存在服务器，支持多设备访问
5. 点击"创建"完成

### 管理 Workspace

#### **筛选 Workspace**
在工作台界面，点击"工作台"标题右侧的筛选标签：
- **全部Workspace**（绿色）：显示所有 Workspace
- **云端Workspace**（橙色）：只显示云端 Workspace
- **本地Workspace**（蓝色）：只显示本地 Workspace

点击标签即可轮转切换筛选类型。

#### **切换 Workspace**
- **方法一**：在工作台界面点击要进入的 Workspace 卡片上的"进入"按钮
- **方法二**：在 Workspace 内部，点击顶部 Workspace 名称，选择"返回我的工作台"或"切换 Workspace"

#### **查看 Workspace 详情**
在工作台界面点击 Workspace 卡片上的"详情"按钮，可以查看：
- Workspace 基本信息（名称、描述、创建时间）
- 存储类型标签
- 成员数量（仅云端 Workspace）
- 成员列表和角色信息（仅云端 Workspace）
- 您的角色权限（仅云端 Workspace）

#### **编辑 Workspace**
在 Workspace 详情界面，点击右上角"编辑"按钮（仅拥有者可见）：
- 修改 Workspace 名称
- 修改描述信息
- 保存更改

#### **删除 Workspace**
在 Workspace 详情界面，点击右上角菜单中的"删除"选项（仅拥有者可见）：
- 系统会要求输入账户密码验证身份
- 确认后将删除 Workspace 及其所有数据
- **注意**：删除操作不可恢复，请谨慎操作！

### Workspace 标识

每个 Workspace 卡片上会显示以下标识：

#### **存储类型标签**（右上角）
- **服务器**（橙色）：云端 Workspace
- **本地**（蓝色）：本地 Workspace

#### **角色权限标签**（右上角，云端 Workspace）
- **拥有者**（紫色）：Workspace 创建者，拥有所有权限
- **管理员**（红色）：管理权限，可管理成员和设置
- **编辑者**（蓝色）：可编辑数据，但不能管理成员
- **查看者**（灰色）：只能查看数据，不能修改

#### **当前 Workspace 标签**（左下角）
- **当前**（绿色）：表示这是您正在使用的 Workspace

#### **成员数标签**（右下角，云端 Workspace）
- 显示 Workspace 的成员数量

---

## 基础功能

进入 Workspace 后，点击底部导航栏第一个图标进入基础功能页面。

### 产品管理

**功能位置**：基础功能 → 产品

**主要功能**：
- **添加产品**：点击右上角"+"按钮，输入产品名称、描述、初始库存、单位、供应商
- **编辑产品**：点击产品卡片，修改信息后保存
- **删除产品**：在编辑界面点击删除按钮
- **搜索产品**：在搜索框输入产品名称或描述
- **筛选产品**：按供应商筛选产品

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 同一 Workspace 下产品名称不能重复
- 产品库存会在采购、销售、退货时自动更新
- 删除产品前请确保没有相关的采购、销售、退货记录

### 客户管理

**功能位置**：基础功能 → 客户

**主要功能**：
- **添加客户**：输入客户名称和备注
- **编辑客户**：修改客户信息
- **删除客户**：删除客户（需确保没有相关销售、退货、进账记录）
- **搜索客户**：在搜索框输入客户名称

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

### 供应商管理

**功能位置**：基础功能 → 供应商

**主要功能**：
- **添加供应商**：输入供应商名称和备注
- **编辑供应商**：修改供应商信息
- **删除供应商**：删除供应商（需确保没有相关采购、汇款记录）
- **搜索供应商**：在搜索框输入供应商名称

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

### 员工管理

**功能位置**：基础功能 → 员工

**主要功能**：
- **添加员工**：输入员工名称和备注
- **编辑员工**：修改员工信息
- **删除员工**：删除员工（需确保没有相关进账、汇款记录）
- **搜索员工**：在搜索框输入员工名称

**用途**：员工用于记录进账和汇款的经手人

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

### 采购管理

**功能位置**：基础功能 → 采购

**主要功能**：
- **添加采购**：选择产品、供应商，输入数量、单价、日期、备注
- **编辑采购**：修改采购记录，系统会自动计算库存变化
- **删除采购**：删除采购记录，系统会自动恢复库存
- **筛选采购**：按日期范围、产品、供应商筛选

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 采购数量为正数时，库存增加
- 采购时会自动更新产品库存
- 系统会自动记录审计日志

### 销售管理

**功能位置**：基础功能 → 销售

**主要功能**：
- **添加销售**：选择产品、客户，输入数量、单价、日期、备注
- **编辑销售**：修改销售记录，系统会自动计算库存变化
- **删除销售**：删除销售记录，系统会自动恢复库存
- **筛选销售**：按日期范围、产品、客户筛选

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 销售前系统会检查库存是否充足
- 库存不足时无法完成销售，请先补充库存
- 销售时会自动减少产品库存

### 退货管理

**功能位置**：基础功能 → 退货

**主要功能**：
- **添加退货**：选择产品、客户，输入数量、单价、日期、备注
- **编辑退货**：修改退货记录
- **删除退货**：删除退货记录
- **筛选退货**：按日期范围、产品、客户筛选

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 退货时会自动增加产品库存
- 退货记录用于记录客户退货情况

### 进账管理

**功能位置**：基础功能 → 进账

**主要功能**：
- **添加进账**：选择客户，输入实际进账金额、优惠金额（或优惠前价格）、日期、经手人、支付方式、备注
- **编辑进账**：修改进账记录
- **删除进账**：删除进账记录
- **筛选进账**：按日期范围、客户、经手人、支付方式筛选

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 实际进账金额 + 优惠金额 = 优惠前价格
- 可以只输入实际进账金额和优惠金额，系统自动计算优惠前价格
- 也可以只输入实际进账金额和优惠前价格，系统自动计算优惠金额
- 优惠前价格必须大于等于实际进账金额

### 汇款管理

**功能位置**：基础功能 → 汇款

**主要功能**：
- **添加汇款**：选择供应商，输入金额、日期、经手人、支付方式、备注
- **编辑汇款**：修改汇款记录
- **删除汇款**：删除汇款记录
- **筛选汇款**：按日期范围、供应商、经手人、支付方式筛选

**权限要求**：
- 添加/编辑/删除：编辑者及以上权限
- 查看：所有角色

**注意事项**：
- 汇款记录用于记录向供应商的付款情况
- 金额必须大于0

---

## 数据统计与分析

进入 Workspace 后，点击底部导航栏第二个图标进入数据统计页面。

### 基础统计

#### **库存统计**
- 显示所有产品的当前库存情况
- 支持搜索和筛选
- 可导出 CSV/PDF

#### **采购统计**
- 按日期范围统计采购记录
- 支持按产品、供应商筛选
- 显示采购总额和数量
- 可导出 CSV/PDF

#### **销售统计**
- 按日期范围统计销售记录
- 支持按产品、客户筛选
- 显示销售总额和数量
- 可导出 CSV/PDF

#### **退货统计**
- 按日期范围统计退货记录
- 支持按产品、客户筛选
- 显示退货总额和数量
- 可导出 CSV/PDF

### 综合分析

#### **销售汇总**
- 综合销售数据统计
- 按产品、客户、时间维度分析
- 可导出 CSV/PDF

#### **销售与进账分析**
- 对比销售记录和进账记录
- 分析收款情况和应收账款
- 可导出 CSV/PDF

#### **采购与汇款分析**
- 对比采购记录和汇款记录
- 分析付款情况和应付账款
- 可导出 CSV/PDF

#### **财务统计**
- 综合财务数据分析
- 收入、支出、利润统计
- 按时间段对比分析
- 可导出 CSV/PDF

### 智能分析

#### **数据仪表盘**
- 可视化数据展示
- 关键指标汇总
- 趋势分析图表

#### **数据分析助手**
- AI 智能对话分析
- 自然语言查询数据
- 智能生成分析报告
- 需配置 AI 模型（个人中心 → 设置 → 模型）

**权限要求**：
- 所有统计和分析功能：所有角色均可访问

---

## 数据管理与备份

### 数据管理

**功能位置**：Workspace 内 → 系统工具 → 数据管理

#### **导出 Workspace 数据**
将当前 Workspace 的所有业务数据导出为 JSON 备份文件。

**导出内容**：
- 产品、客户、供应商、员工
- 采购、销售、退货、进账、汇款记录
- 导出信息（账户名、Workspace名、导出时间、版本）

**导出文件命名**：`{账户名}_{Workspace名}数据_{时间戳}.json`

**使用场景**：
- 数据迁移
- 长期归档
- 跨 Workspace 数据复制

**权限要求**：所有角色

#### **导入数据（覆盖）**
从备份文件恢复数据，将完全替换当前 Workspace 的业务数据。

**支持的文件格式**：
- 新版本导出的 JSON 文件（包含 workspaceName 和 workspaceId）
- 旧版本导出的 JSON 文件（兼容模式）

**导入过程**：
1. 选择要导入的 JSON 文件
2. 系统显示备份信息预览：
   - 来源账户名和 Workspace 名
   - 导出时间和版本
   - 数据统计（各类数据的记录数）
3. 确认导入后，系统将：
   - 删除当前 Workspace 的所有业务数据
   - 导入新数据
   - 重新映射所有 ID 关系
   - 保持数据完整性和外键约束

**注意事项**：
- ⚠️ 导入操作会覆盖当前所有数据，请提前备份！
- 建议先导出当前数据作为备份
- 导入后无法撤销
- 系统会自动处理 ID 映射和关联关系

**权限要求**：拥有者和管理员

### 数据备份

**功能位置**：Workspace 内 → 系统工具 → 数据备份

数据备份功能是针对单个 Workspace 的自动备份系统。

#### **自动备份设置**

**启用自动备份**：
- 开启后系统会定时自动备份当前 Workspace 的数据
- 每个 Workspace 有独立的备份设置和备份文件

**备份间隔**：
可选择 5 分钟、15 分钟、30 分钟、1 小时、6 小时、12 小时、24 小时

**最大保留数量**：
- 设置最多保留多少个备份文件（1-50 个）
- 超过最大数量的旧备份会自动删除

**启动时自动备份**：
- 开启后，进入 Workspace 时自动创建一次备份

**退出时自动备份**：
- 开启后，退出 Workspace 时自动创建一次备份

#### **手动备份**

点击"立即备份"按钮手动创建当前 Workspace 的备份。

**备份文件命名**：`auto_backup_{Workspace名}_{时间戳}.json`

#### **备份恢复**

1. 进入"备份列表"界面
2. 查看当前 Workspace 的所有备份文件
3. 选择要恢复的备份文件
4. 确认后恢复数据（会覆盖当前数据）

**备份文件信息**：
- 备份时间
- 文件大小
- 所属 Workspace

**注意事项**：
- 备份文件按 Workspace 隔离，只显示当前 Workspace 的备份
- 备份文件保存在平台特定的目录中
- 建议定期检查备份文件是否正常
- 恢复数据前请确保当前数据已备份

**权限要求**：所有角色

### 审计日志

**功能位置**：Workspace 内 → 系统工具 → 日志

审计日志记录当前 Workspace 的所有操作历史，每个 Workspace 有独立的日志表。

#### **日志记录内容**

**操作类型**：
- **创建**（绿色）：新增记录
- **修改**（蓝色）：编辑记录
- **删除**（红色）：删除记录

**实体类型**：
产品、客户、供应商、员工、采购、销售、退货、进账、汇款

**记录信息**：
- 操作人（用户名，显示在卡片右上角）
- 操作时间（UTC+8 时区）
- 操作类型和实体类型（标签形式）
- 实体名称和 ID
- 变更详情（修改前后的数据对比）
- IP 地址和设备信息

#### **日志筛选**

- 按操作类型筛选（创建/修改/删除）
- 按实体类型筛选
- 按时间范围筛选
- 按操作人筛选
- 支持组合筛选

#### **日志查看**

点击日志卡片可以查看详细信息：
- 完整的操作信息
- 修改前后的数据对比
- 变更字段详情

**权限要求**：所有角色

---

## 成员管理与协作

仅适用于**云端 Workspace**。本地 Workspace 不支持成员管理。

### 角色和权限

AgrisaleWS 提供四种角色，每种角色有不同的权限：

| 权限/角色 | 拥有者 | 管理员 | 编辑者 | 查看者 |
|---------|--------|--------|--------|--------|
| 查看数据 | ✅ | ✅ | ✅ | ✅ |
| 创建数据 | ✅ | ✅ | ✅ | ❌ |
| 修改数据 | ✅ | ✅ | ✅ | ❌ |
| 删除数据 | ✅ | ✅ | ✅ | ❌ |
| 管理成员 | ✅ | ✅ | ❌ | ❌ |
| 管理设置 | ✅ | ✅ | ❌ | ❌ |
| 编辑 Workspace | ✅ | ❌ | ❌ | ❌ |
| 删除 Workspace | ✅ | ❌ | ❌ | ❌ |

**角色说明**：

- **拥有者**（紫色）：
  - Workspace 的创建者
  - 拥有所有权限
  - 可以编辑和删除 Workspace
  - 每个 Workspace 只有一个拥有者
  - 不可被移除或降权

- **管理员**（红色）：
  - 可以管理成员和设置
  - 可以邀请新成员
  - 可以修改其他成员的角色（除了拥有者）
  - 可以移除其他成员（除了拥有者）
  - 可以操作所有业务数据

- **编辑者**（蓝色）：
  - 可以查看和编辑所有业务数据
  - 可以创建、修改、删除业务记录
  - 不能管理成员和设置

- **查看者**（灰色）：
  - 只能查看数据
  - 不能进行任何修改操作
  - 适合外部审计或只需了解数据的人员

### 查看成员信息

**方法一：在 Workspace 详情界面**
1. 在工作台点击 Workspace 卡片的"详情"按钮
2. 向下滚动查看"成员信息"块
3. 可以看到所有成员的：
   - 用户名
   - 角色标签（颜色标识）
   - 当前用户标记（如果是您自己）
   - 邀请人信息
   - 加入时间（UTC+8 时区）

**方法二：在成员管理界面**
1. 拥有者和管理员可以在 Workspace 详情的"成员信息"块右上角点击"管理成员"按钮
2. 进入成员管理界面查看更详细的成员信息

### 邀请成员

**权限要求**：拥有者或管理员

**操作步骤**：
1. 在 Workspace 详情界面点击"管理成员"按钮
2. 在成员管理界面点击右上角"+"按钮
3. 输入要邀请的用户名（不是邮箱）
4. 选择角色：管理员、编辑者或查看者
5. 点击"邀请"完成

**注意事项**：
- 系统会检查用户名是否存在
- 如果用户存在，将直接添加为成员
- 不能邀请已是成员的用户
- 不能邀请拥有者自己

### 修改成员角色

**权限要求**：拥有者或管理员

**操作步骤**：
1. 在成员管理界面找到要修改的成员
2. 点击成员卡片右侧的菜单按钮（三个点）
3. 选择"修改角色"
4. 选择新角色：管理员、编辑者或查看者
5. 确认修改

**注意事项**：
- 不能修改拥有者的角色
- 系统会实时更新成员权限
- 如果修改了管理员的角色为编辑者或查看者，他将失去管理权限

### 移除成员

**权限要求**：拥有者或管理员

**操作步骤**：
1. 在成员管理界面找到要移除的成员
2. 点击成员卡片右侧的菜单按钮（三个点）
3. 选择"移除成员"
4. 确认移除

**注意事项**：
- 不能移除拥有者
- 被移除的成员将立即失去访问权限
- 被移除的成员将无法在工作台看到该 Workspace

### 权限检查机制

系统会在以下情况实时检查权限：
- 进入 Workspace 时
- 点击"管理成员"按钮时
- 执行任何需要权限的操作时

如果您的权限被降低，系统会：
- 自动返回到上一级界面
- 隐藏您无权访问的功能
- 显示错误提示

### 协作最佳实践

1. **合理分配角色**：
   - 核心团队成员：管理员或编辑者
   - 普通员工：编辑者
   - 外部审计或查账：查看者

2. **定期检查成员列表**：
   - 及时移除离职或不再需要访问的成员
   - 确保每个成员的角色合适

3. **使用审计日志**：
   - 定期查看日志，了解团队操作情况
   - 发现异常操作及时处理

4. **数据安全**：
   - 重要操作（如删除 Workspace）需要密码验证
   - 导入数据需要管理员权限
   - 定期备份数据

---

## 系统设置

系统设置分为两部分：
- **Workspace 级别的设置**：在 Workspace 内部配置
- **全局设置**：在个人中心配置

### Workspace 级别设置

在 Workspace 内部可以配置：
- 数据管理（导入/导出）
- 数据备份（自动备份设置）
- 审计日志（查看和筛选）

这些设置仅影响当前 Workspace。

### 全局设置

在个人中心可以配置：
- 账户设置
- AI 模型设置
- 服务器配置
- 在线设备管理

这些设置影响所有 Workspace 和整个账户。

---

## 个人中心

在底部导航栏点击"个人中心"图标进入个人中心界面。

### 个人信息

显示您的账户信息：
- 用户名
- 注册时间（UTC+8 时区）
- 最后登录时间（UTC+8 时区）
- 在线设备数量（右上角小标签，可在设置中控制显示）

### 设置

#### **账户**

**功能位置**：个人中心 → 设置 → 账户

**修改密码**：
1. 输入当前密码
2. 输入新密码（至少3个字符）
3. 再次输入新密码确认
4. 点击"更新密码"

**在线设备设置**：
- **显示在线设备数量**：控制是否在界面显示在线设备小标签
- **新设备上线时通知**：有新设备登录时显示通知
- **设备下线时通知**：有设备退出时显示通知

**退出登录**：
退出当前账号，返回登录界面。
- 退出前会自动备份当前 Workspace（如果开启了"退出时自动备份"）
- 退出后所有数据安全保存

**注销账户**：
永久删除您的账户和所有数据。
- 需要输入密码验证身份
- 如果您是某些云端 Workspace 的拥有者：
  - 如果 Workspace 有其他成员，系统会将所有权转移给最早加入的成员
  - 如果 Workspace 没有其他成员，该 Workspace 将被删除
- 所有本地 Workspace 将被删除
- ⚠️ 注销操作不可恢复，请谨慎操作！

#### **模型**

**功能位置**：个人中心 → 设置 → 模型

配置 AI 数据分析助手（全局设置，所有 Workspace 共用）：

**DeepSeek API 配置**：
- **API Key**：输入您的 DeepSeek API 密钥
- **模型**：选择使用的模型（默认：deepseek-chat）
- **Temperature**：调整回答的随机性（0.0-2.0，默认：0.7）
- **Max Tokens**：最大回复长度（100-8000，默认：2000）

**使用场景**：
- 在"数据分析助手"功能中使用
- 通过自然语言查询和分析数据
- 生成智能分析报告

**注意事项**：
- 需要自行注册 DeepSeek 账号并获取 API Key
- API 调用可能产生费用
- 不配置也不影响其他功能使用

#### **服务器**

**功能位置**：个人中心 → 设置 → 服务器

配置服务器连接（全局设置）：

**查看当前服务器地址**：
显示当前连接的服务器地址。

**修改服务器地址**：
1. 输入新的服务器地址（格式：http://或https://开头）
2. 点击"测试连接"验证地址是否可用
3. 测试成功后点击"保存配置"

**快速配置**：
- **HTTPS**：使用 HTTPS 内网穿透地址（不可修改）
- **局域网**：使用局域网地址（可修改）

**连接策略**：
系统会自动按以下顺序尝试连接：
1. 您配置的服务器地址
2. HTTPS 地址
3. 局域网地址

成功连接的地址会自动保存。

#### **关于**

**功能位置**：个人中心 → 设置 → 关于

**查看信息**：
- 系统名称和图标
- 当前版本号
- 版本更新日期
- 功能特性介绍
- 开源许可信息

**查看帮助**：
点击"查看帮助"按钮打开本帮助文档。

---

## 常见问题

### 1. 无法连接到服务器

**可能原因**：
- 服务器地址配置错误
- 网络连接问题
- 服务器未启动

**解决方法**：
1. 检查网络连接是否正常
2. 进入"个人中心" → "设置" → "服务器"
3. 测试当前服务器地址的连接
4. 尝试使用快速配置中的 HTTPS 或局域网地址
5. 确认服务器是否正常运行

### 2. 无法创建云端 Workspace

**可能原因**：
- 未连接到服务器
- 网络问题

**解决方法**：
1. 确认已成功连接到服务器
2. 检查网络连接
3. 如果暂时无法连接，可以先创建本地 Workspace

### 3. 看不到某个 Workspace

**可能原因**：
- 本地 Workspace 在其他设备上创建，当前设备无法访问
- 被移出云端 Workspace
- Workspace 被删除
- 使用了筛选功能

**解决方法**：
1. 检查工作台的筛选设置（点击筛选标签切换）
2. 确认是否是本地 Workspace（只能在创建设备上访问）
3. 联系 Workspace 拥有者确认您的成员身份

### 4. 无法编辑数据

**可能原因**：
- 您的角色是"查看者"，没有编辑权限
- 权限被修改

**解决方法**：
1. 在 Workspace 详情查看您的角色
2. 联系拥有者或管理员提升权限

### 5. 无法管理成员

**可能原因**：
- 您的角色不是拥有者或管理员
- 本地 Workspace 不支持成员管理

**解决方法**：
1. 确认 Workspace 是云端类型（本地 Workspace 不支持成员管理）
2. 联系拥有者提升您的权限为管理员

### 6. 库存显示不正确

**可能原因**：
- 有未完成的采购、销售、退货操作
- 数据同步问题
- 多人同时操作导致冲突

**解决方法**：
1. 刷新产品列表（下拉刷新）
2. 检查审计日志，查看最近的操作
3. 检查相关的采购、销售、退货记录
4. 如果是云端 Workspace，可能是多人同时操作，等待数据同步

### 7. 无法销售，提示库存不足

**可能原因**：
- 产品库存确实不足
- 库存被其他成员操作占用

**解决方法**：
1. 检查产品当前库存
2. 先进行采购补充库存
3. 查看审计日志，确认是否有其他成员的销售操作
4. 刷新数据后重试

### 8. 导入数据失败

**可能原因**：
- JSON 文件格式不正确
- 文件损坏
- 数据包含无效值

**解决方法**：
1. 确认文件是由系统导出的 JSON 文件
2. 检查文件是否完整（没有被截断）
3. 尝试用文本编辑器打开文件，检查 JSON 格式
4. 如果是旧版本的导出文件，系统会自动兼容

### 9. 自动备份不工作

**可能原因**：
- 自动备份未启用
- 备份间隔设置过长
- 应用在后台被系统杀死

**解决方法**：
1. 检查"数据备份"设置中是否启用了自动备份
2. 检查备份间隔设置
3. 查看"最后备份时间"确认备份是否执行
4. 手动执行一次备份，确认功能正常

### 10. 忘记密码

**解决方法**：
- 目前系统不支持密码找回功能
- 请联系系统管理员
- 或重新注册新账号（但会失去原账号的所有数据）

### 11. 被移出 Workspace

**情况说明**：
- 拥有者或管理员可以移除成员
- 被移除后您将无法访问该 Workspace

**解决方法**：
1. 联系 Workspace 拥有者了解原因
2. 如果需要继续访问，请求重新邀请

### 12. Workspace 被删除

**情况说明**：
- 只有拥有者可以删除 Workspace
- 删除操作不可恢复

**解决方法**：
- 如果您有该 Workspace 的数据导出文件，可以创建新 Workspace 并导入数据
- 如果没有备份，数据无法恢复

### 13. 多设备同时使用

**说明**：
- 系统支持多设备同时登录同一账号
- 云端 Workspace 数据实时同步
- 本地 Workspace 只能在创建设备上访问
- 系统会显示所有在线设备数量

**注意事项**：
- 多人同时编辑可能导致数据冲突
- 建议团队成员分工操作不同的数据
- 使用审计日志追踪操作历史

---

## 使用技巧

### 1. 合理规划 Workspace

**按业务场景创建**：
- 不同的业务线创建独立的 Workspace
- 个人业务使用本地 Workspace
- 团队协作使用云端 Workspace

**命名规范**：
- 使用清晰的名称（如"2024年主营业务"、"分店A账本"）
- 添加详细的描述信息

### 2. 善用筛选功能

**工作台筛选**：
- 使用筛选标签快速找到需要的 Workspace
- 本地 Workspace 适合离线和隐私场景
- 云端 Workspace 适合多设备和协作场景

**数据筛选**：
- 各个数据列表都支持搜索和筛选
- 使用日期范围筛选查看特定时期的数据
- 组合多个筛选条件精确定位数据

### 3. 定期备份数据

**自动备份**：
- 为重要 Workspace 启用自动备份
- 设置合适的备份间隔（建议 15 分钟或 30 分钟）
- 启用"启动时自动备份"和"退出时自动备份"

**手动备份**：
- 在重要操作前手动备份
- 使用"导出 Workspace 数据"创建完整备份
- 定期清理旧备份文件，保留最近的版本

### 4. 团队协作建议

**角色分配**：
- 只给少数人管理员权限
- 大部分成员使用编辑者权限
- 只需查看数据的人员设为查看者

**沟通协调**：
- 重要操作前通知团队成员
- 使用审计日志了解操作历史
- 定期检查成员列表，移除不需要访问的成员

### 5. 数据导出技巧

**选择合适的导出方式**：
- 单个报表导出：使用报表界面的导出功能（CSV/PDF）
- 完整数据导出：使用"导出 Workspace 数据"（JSON）

**导出前筛选**：
- 先设置筛选条件，只导出需要的数据
- CSV 格式适合在 Excel 中进一步分析
- PDF 格式适合打印和分享

### 6. 审计日志利用

**定期检查**：
- 查看团队成员的操作记录
- 发现异常操作及时处理

**追溯问题**：
- 数据出现问题时，通过日志追溯操作历史
- 查看是谁、何时、做了什么修改

### 7. 在线设备管理

**监控设备**：
- 在个人中心查看在线设备数量
- 启用设备上下线通知
- 发现异常设备及时退出登录

### 8. 善用 AI 助手

**配置模型**：
- 配置 DeepSeek API 后可使用数据分析助手
- 通过自然语言查询数据
- 生成分析报告和建议

---

## 数据安全

### 1. 密码安全

- 使用强密码
- 定期修改密码
- 不要与他人共享密码

### 2. 权限管理

- 按需分配角色权限
- 定期检查成员列表
- 及时移除不需要访问的成员

### 3. 数据备份

- 启用自动备份功能
- 定期手动备份重要数据
- 妥善保管导出的数据文件

### 4. 操作审计

- 定期查看审计日志
- 发现异常操作及时处理
- 保持操作记录的完整性

### 5. 本地 vs 云端

**本地 Workspace**：
- 数据只存储在本地设备
- 隐私性更强
- 无法多设备访问
- 设备损坏可能导致数据丢失

**云端 Workspace**：
- 数据存储在服务器
- 支持多设备访问
- 支持团队协作
- 定期检查服务器备份

---

## 联系支持

如果您在使用过程中遇到问题，可以：

1. 查看本帮助文档
2. 检查系统版本是否为最新版本
3. 查看"关于"中的系统信息
4. 联系系统管理员
5. 查看审计日志了解操作历史
6. 检查在线设备和登录状态

---

## 更新日志

### v1.1.0（当前版本）

**更新内容 🚀**：

#### 🐛 Bug 修复
- **数据删除功能修复**：修复了采购记录和销售记录删除时显示成功但实际未删除的严重bug
- **进账记录删除修复**：修复了云端workspace进账记录删除功能缺失workspace支持的问题
- **数据备份恢复修复**：修复了备份恢复功能中的权限检查问题，现在管理员可以正常恢复备份
- **时间显示修复**：统一所有时间显示为UTC+8（中国标准时间），确保时间显示准确一致

#### ✨ 功能改进
- **日志显示优化**：
  - 进账记录日志现在显示客户名称而不是"进账记录"
  - 汇款记录日志现在显示供应商名称而不是"汇款记录"
  - 覆盖操作的备注信息统一使用普通字体，不再使用斜体
- **日志详情增强**：
  - 备份恢复记录显示"恢复前数据"和"恢复后数据"
  - 数据导入记录显示"导入前数据"和"导入后数据"
  - 所有覆盖操作都包含完整的数据对比信息

#### 🔧 技术改进
- 完善了所有删除操作的workspace支持
- 优化了日志记录的entity_name显示逻辑
- 改进了数据导入/恢复的日志记录完整性

---

### v1.0.0

**首个正式版本 🎉**：
- ✨ 引入 Workspace 架构，支持多账本管理
- ✨ 支持本地和云端两种存储类型
- ✨ 云端 Workspace 支持多人协作
- ✨ 完整的角色权限系统
- ✨ Workspace 级别的数据管理和备份
- ✨ 审计日志按 Workspace 隔离
- ✨ 全新的界面设计（工作台 + 个人中心）
- ✨ 在线设备管理和通知
- ✨ 数据导入导出支持 Workspace 级别
- ✨ 时间显示统一使用 UTC+8 时区

**核心特性**：
- 🎨 现代化 UI 设计
- 🎨 统一的底部导航栏
- 🎨 轮转式筛选标签
- 🎨 彩色的角色和状态标识
- ⚡ 优化的数据加载性能
- ⚡ 并行加载提升速度
- 🔒 密码验证保护重要操作
- 📝 完整的审计日志追踪

---

**祝您使用愉快！**

*最后更新：2025年12月*  
*系统版本：v1.1.0*  
*文档版本：1.1.0*
